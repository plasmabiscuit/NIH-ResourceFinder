const{useEffect,useMemo,useRef,useState}=React,uniqueSorted=e=>Array.from(new Set(e.filter(Boolean))).sort((t,a)=>t.localeCompare(a,void 0,{sensitivity:"base"})),normalizeResource=(e,t)=>{var m,f,y,r,g,b,v,C,j,S,B,L,E,D,F,K,H,M,_,A,T,x,Q,O,R,z,w,U,q,$,k,I,P,J,X,G,Z,Y,ee,V,te,se,W,ae,s,c;const a=(f=(m=e.lifecycle_curation)==null?void 0:m.maintaining_ic)!=null?f:[],n=(r=(y=e.type_content)==null?void 0:y.resource_type)!=null?r:[],o=(b=(g=e.type_content)==null?void 0:g.domains)!=null?b:[],d=(C=(v=e.practical_usage)==null?void 0:v.compute_location)!=null?C:[],u=(S=(j=e.tagging)==null?void 0:j.keywords)!=null?S:[],h=(L=(B=e.access_cost)==null?void 0:B.access_model)!=null?L:"",p=(D=(E=e.access_cost)==null?void 0:E.data_sensitivity)!=null?D:"";return{id:(K=(F=e.identity)==null?void 0:F.id)!=null?K:`resource-${t}`,name:(M=(H=e.identity)==null?void 0:H.resource_name)!=null?M:"Untitled Resource",shortName:(A=(_=e.identity)==null?void 0:_.short_name)!=null?A:"",icCode:(x=(T=e.identity)==null?void 0:T.ic_code)!=null?x:"",icName:(O=(Q=e.identity)==null?void 0:Q.ic_name)!=null?O:"",primaryUrl:(z=(R=e.identity)==null?void 0:R.primary_url)!=null?z:"",docsUrl:(U=(w=e.identity)==null?void 0:w.docs_url)!=null?U:"",apiUrl:($=(q=e.identity)==null?void 0:q.api_url)!=null?$:"",resourceTypes:n,domains:o,costStatus:(I=(k=e.access_cost)==null?void 0:k.cost_status)!=null?I:"",accessModel:h,requiresDua:!!((P=e.access_cost)!=null&&P.requires_dua),requiresRegistration:!!((J=e.access_cost)!=null&&J.requires_registration),dataSensitivity:p,hasHumanData:!!((X=e.access_cost)!=null&&X.has_human_data),maintainingICs:a.length?a:[],computeLocation:d,skillsRequired:(Z=(G=e.practical_usage)==null?void 0:G.skills_required)!=null?Z:[],typicalUseCases:(ee=(Y=e.practical_usage)==null?void 0:Y.typical_use_cases)!=null?ee:"",integrationParents:(te=(V=e.practical_usage)==null?void 0:V.integration_parents)!=null?te:[],notes:(W=(se=e.lifecycle_curation)==null?void 0:se.notes)!=null?W:"",status:(s=(ae=e.lifecycle_curation)==null?void 0:ae.status)!=null?s:"",keywords:u,hasApi:!!((c=e.identity)!=null&&c.api_url),isWebBased:hasWebAccess(d),accessRestrictiveness:classifyAccessModel(h),sensitivityRestrictiveness:classifySensitivity(p)}},createSearchIndex=e=>{if(!window.FlexSearch)return null;const t=new window.FlexSearch.Index({tokenize:"forward",cache:!0,preset:"match"});return e.forEach(a=>{const n=[a.name,a.shortName,a.icCode,a.icName,a.resourceTypes.join(" "),a.domains.join(" "),a.typicalUseCases,a.skillsRequired.join(" "),a.keywords.join(" "),a.notes].filter(Boolean).join(" ");t.add(a.id,n)}),t},LOGO_LIBRARY={CC:{small:"Icons/CC.png",large:"Icons/CC.png"},CIT:{small:"Icons/CIT.png",large:"Icons/CIT.png"},CSR:{small:"Icons/CSR.png",large:"Icons/CSR.png"},FIC:{small:"Icons/FIC.png",large:"Icons/FIC.png"},NCATS:{small:"Icons/NCATS.png",large:"Icons/NCATS.png"},NCCIH:{small:"Icons/NCCIH.png",large:"Icons/NCCIH.png"},NCI:{small:"Icons/NCI.png",large:"Icons/NCI.png"},NEI:{small:"Icons/NEI.png",large:"Icons/NEI.png"},NIEHS:{small:"Icons/NIEHS.png",large:"Icons/NIEHS.png"},NHGRI:{small:"Icons/NHGRI.png",large:"Icons/NHGRI.png"},NHLBI:{small:"Icons/NHLBI.png",large:"Icons/NHLBI.png"},NIA:{small:"Icons/NIA.png",large:"Icons/NIA.png"},NIAAA:{small:"Icons/NIAAA.png",large:"Icons/NIAAA.png"},NIAID:{small:"Icons/NIAID.png",large:"Icons/NIAID.png"},NIAMS:{small:"Icons/NIAMSD.png",large:"Icons/NIAMSD.png"},NIBIB:{small:"Icons/NIBIB.png",large:"Icons/NIBIB.png"},NICHD:{small:"Icons/NICHHD.png",large:"Icons/NICHHD.png"},NIDA:{small:"Icons/NIDA.png",large:"Icons/NIDA.png"},NIDCD:{small:"Icons/NIDCD.png",large:"Icons/NIDCD.png"},NIDCR:{small:"Icons/NIDCR.png",large:"Icons/NIDCR.png"},NIGMS:{small:"Icons/NIGMS.png",large:"Icons/NIGMS.png"},NIMH:{small:"Icons/NIMH.png",large:"Icons/NIMH.png"},NIMHD:{small:"Icons/NIMHHD.png",large:"Icons/NIMHHD.png"},NINDS:{small:"Icons/NINDS.png",large:"Icons/NINDS.png"},NINR:{small:"Icons/NINR.png",large:"Icons/NINR.png"},NLM:{small:"Icons/NLM.png",large:"Icons/NLM.png"}},TOTAL_INSTITUTES=Object.keys(LOGO_LIBRARY).length,NAV_LINKS=[{label:"Resources",href:"#resources"},{label:"Filters",href:"#filters"},{label:"Support",href:"#support"}],METRIC_OPTIONS=[{key:"research_grants_awards",label:"Research grant awards by IC"},{key:"research_grants_funding",label:"Research grant funding by IC"},{key:"research_project_awards",label:"Awards by IC"},{key:"research_project_funding",label:"Funding by IC"},{key:"rpg_funding_by_ic",label:"Research project grants: funding by IC"},{key:"rpg_success_rate",label:"Success rate (RPGs) by IC"}],FIRST_YEAR=2010,CURRENT_YEAR=new Date().getFullYear(),YEAR_OPTIONS=Array.from({length:CURRENT_YEAR-FIRST_YEAR+1},(e,t)=>FIRST_YEAR+t),IC_FULL_NAME_MAP={CC:"NIH Clinical Center",CIT:"Center for Information Technology",CSR:"Center for Scientific Review",FIC:"Fogarty International Center",NCATS:"National Center for Advancing Translational Sciences",NCCIH:"National Center for Complementary and Integrative Health",NCI:"National Cancer Institute",NEI:"National Eye Institute",NIEHS:"National Institute of Environmental Health Sciences",NHGRI:"National Human Genome Research Institute",NHLBI:"National Heart, Lung, and Blood Institute",NIA:"National Institute on Aging",NIAAA:"National Institute on Alcohol Abuse and Alcoholism",NIAID:"National Institute of Allergy and Infectious Diseases",NIAMS:"National Institute of Arthritis and Musculoskeletal and Skin Diseases",NIBIB:"National Institute of Biomedical Imaging and Bioengineering",NICHD:"Eunice Kennedy Shriver National Institute of Child Health and Human Development",NIDA:"National Institute on Drug Abuse",NIDCD:"National Institute on Deafness and Other Communication Disorders",NIDCR:"National Institute of Dental and Craniofacial Research",NIDDK:"National Institute of Diabetes and Digestive and Kidney Diseases",NIGMS:"National Institute of General Medical Sciences",NIMH:"National Institute of Mental Health",NIMHD:"National Institute on Minority Health and Health Disparities",NINDS:"National Institute of Neurological Disorders and Stroke",NINR:"National Institute of Nursing Research",NLM:"National Library of Medicine"},RESTRICTIVENESS_LABELS=["Least restrictive","Moderate","Most restrictive"],classifyAccessModel=(e="")=>{const t=e.toLowerCase();if(!t)return 1;const a=/controlled|restricted|approval|dua|protected/.test(t),n=/open|public|catalog/.test(t);return a&&!n?2:a&&n?1:0},classifySensitivity=(e="")=>{const t=e.toLowerCase();return t?/public|open/.test(t)?0:/de-identified|limited|moderate/.test(t)?1:/controlled|restricted|high/.test(t)?2:1:1},hasWebAccess=(e=[])=>e.some(t=>t.toLowerCase().includes("web")),getYearAdjustment=e=>e?1+(e-FIRST_YEAR)*.015:1,getMetricValue=(e,t,a)=>{var d,u;if(!t)return 0;const n=(u=(d=e.metrics)==null?void 0:d[t])!=null?u:0,o=getYearAdjustment(a);return Math.round(n*o)},formatMetricValue=(e,t)=>t==null||Number.isNaN(t)?"N/A":["research_grants_funding","research_project_funding","rpg_funding_by_ic"].includes(e)?t>=1e9?`$${(t/1e9).toFixed(1)}B`:t>=1e6?`$${(t/1e6).toFixed(1)}M`:`$${t.toLocaleString()}`:e==="rpg_success_rate"?`${t.toFixed(1)}%`:t.toLocaleString(),formatShare=e=>e==null||Number.isNaN(e)?"N/A":`${(e*100).toFixed(1)}% of total`,buildEssentialLinks=e=>{const t=(e==null?void 0:e.toLowerCase())||"";return[{label:`${e} homepage`,url:`https://www.${t}.nih.gov/`},{label:"RePORTER portfolio",url:`https://reporter.nih.gov/search?ic=${e}`},{label:"Funding opportunities",url:"https://grants.nih.gov/grants/guide/parent_announcements.htm"}]},createSampleMetrics=e=>{const t=150+e*11;return{research_grants_awards:t*5,research_grants_funding:t*9e6,research_project_awards:t*4,research_project_funding:t*75e5,rpg_funding_by_ic:t*65e5,rpg_success_rate:10+e%7*2}},buildQuickLaunchStats=()=>Object.keys(LOGO_LIBRARY).map((t,a)=>({code:t,abbreviation:t,name:IC_FULL_NAME_MAP[t]||`${t} Institute`,metrics:createSampleMetrics(a+1),essentialLinks:buildEssentialLinks(t)})),QUICK_LAUNCH_STATS=buildQuickLaunchStats(),getIcAssets=e=>{const t=(e||"").toUpperCase(),a=LOGO_LIBRARY[t]||{};return{code:e,small:a.small||null,large:a.large||a.small||null}},MaintainerLogoRow=({ics:e,size:t="small"})=>e.length?React.createElement("div",{className:`flex flex-wrap items-center ${t==="large"?"gap-3":"gap-2"}`,"aria-label":"Maintaining IC logos"},e.map((a,n)=>{const o=getIcAssets(a),d=t==="large"?o.large:o.small||o.large;return d?React.createElement("img",{key:`${a}-${n}-${t}`,src:d,alt:`${o.code||"IC"} logo`,className:t==="large"?"h-12 w-auto":"h-8 w-8"}):React.createElement("span",{key:`${a}-${n}-${t}`,className:`rounded-full bg-slate-100 font-semibold text-slate-600 ${t==="large"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"}`},o.code)})):null,LogoFilterGrid=({options:e,selected:t,onToggle:a})=>e.length?React.createElement("div",{className:"ic-ribbon-grid",role:"group","aria-label":"Filter by Institute or Center"},e.map(n=>{const o=getIcAssets(n);if(!o.large)return null;const d=t.includes(n);return React.createElement("button",{type:"button",key:n,"aria-pressed":d,className:`ic-ribbon-tile ${d?"is-active":""}`,onClick:()=>a(n)},React.createElement("span",{className:"ic-ribbon-icon"},React.createElement("img",{src:o.large,alt:`${n} logo`})),React.createElement("span",{className:"ic-ribbon-label"},n))})):null,MultiEntryInput=({label:e,placeholder:t,options:a,values:n,onChange:o})=>{const[d,u]=useState(""),h=useMemo(()=>a.map(r=>({label:r,match:r.toLowerCase()})),[a]),p=r=>{const g=r.trim();if(!g)return;const b=h.find(C=>C.match===g.toLowerCase()),v=b?b.label:g;n.includes(v)||o([...n,v])},m=r=>{o(n.filter(g=>g!==r))},f=r=>{(r.key==="Enter"||r.key==="Tab")&&d.trim()&&(r.preventDefault(),p(d),u("")),r.key==="Backspace"&&!d&&n.length&&m(n[n.length-1])},y=useMemo(()=>{if(!d)return h.map(g=>g.label).filter(g=>!n.includes(g)).slice(0,6);const r=d.toLowerCase();return h.filter(g=>g.match.includes(r)&&!n.includes(g.label)).map(g=>g.label).slice(0,6)},[d,h,n]);return React.createElement("div",null,React.createElement("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500"},e),React.createElement("div",{className:"mt-2 rounded-2xl border border-slate-200 bg-white"},React.createElement("div",{className:"flex flex-wrap gap-2 p-3"},n.map(r=>React.createElement("span",{key:r,className:"inline-flex items-center gap-1 rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-700"},r,React.createElement("button",{type:"button",onClick:()=>m(r),className:"text-indigo-500 hover:text-indigo-700","aria-label":`Remove ${r}`},"\xD7"))),React.createElement("input",{type:"text",value:d,onChange:r=>u(r.target.value),onKeyDown:f,placeholder:n.length?"Add more\u2026":t,className:"min-w-[120px] flex-1 border-0 bg-transparent text-sm text-slate-700 focus:outline-none"}))),y.length>0&&React.createElement("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-500"},y.map(r=>React.createElement("button",{key:r,type:"button",onClick:()=>{p(r),u("")},className:"rounded-full border border-slate-200 px-3 py-1 hover:border-indigo-300 hover:text-indigo-600"},r))))},OptionBrowser=({label:e,options:t,selected:a,onToggle:n})=>{const[o,d]=useState(!1),[u,h]=useState(""),p=useMemo(()=>{if(!u)return t;const m=u.toLowerCase();return t.filter(f=>f.toLowerCase().includes(m))},[t,u]);return t.length?React.createElement("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4"},React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("p",{className:"text-sm font-semibold text-slate-800"},"Browse ",e),React.createElement("p",{className:"text-xs text-slate-500"},"Tap to see every available option.")),React.createElement("button",{type:"button",onClick:()=>d(m=>!m),className:"text-xs font-semibold uppercase tracking-wide text-indigo-600 hover:text-indigo-500"},o?"Hide":"Browse")),o&&React.createElement("div",{className:"mt-4 space-y-3"},React.createElement("input",{type:"search",value:u,onChange:m=>h(m.target.value),placeholder:`Search ${e.toLowerCase()}`,className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 focus:border-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-100"}),React.createElement("div",{className:"max-h-48 space-y-1 overflow-y-auto pr-1"},p.map(m=>React.createElement("label",{key:m,className:"flex cursor-pointer items-center gap-3 rounded-lg px-2 py-1 text-sm text-slate-600 hover:bg-white"},React.createElement("input",{type:"checkbox",checked:a.includes(m),onChange:()=>n(m),className:"h-4 w-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"}),React.createElement("span",{className:"flex-1"},m))),p.length===0&&React.createElement("p",{className:"px-2 text-xs text-slate-400"},"No matches")))):null},ToggleControl=({label:e,description:t,checked:a,onChange:n})=>React.createElement("div",{className:"flex items-center justify-between gap-3"},React.createElement("div",null,React.createElement("p",{className:"text-sm font-semibold text-slate-800"},e),t&&React.createElement("p",{className:"text-xs text-slate-500"},t)),React.createElement("button",{type:"button",role:"switch","aria-checked":a,onClick:()=>n(o=>!o),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${a?"bg-indigo-600":"bg-slate-300"}`},React.createElement("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${a?"translate-x-5":"translate-x-1"}`}))),RestrictivenessSlider=({label:e,value:t,onChange:a})=>React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between"},React.createElement("p",{className:"text-sm font-semibold text-slate-800"},e),React.createElement("span",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-600"},RESTRICTIVENESS_LABELS[t])),React.createElement("input",{type:"range",min:"0",max:"2",step:"1",value:t,onChange:n=>a(Number(n.target.value)),className:"mt-3 w-full cursor-pointer","aria-valuemin":0,"aria-valuemax":2,"aria-valuenow":t,"aria-label":`${e} restrictiveness`}),React.createElement("div",{className:"mt-1 flex justify-between text-[11px] uppercase tracking-wide text-slate-400"},React.createElement("span",null,"least"),React.createElement("span",null,"most"))),ExternalLink=({label:e,url:t})=>React.createElement("a",{href:t||void 0,target:"_blank",rel:"noreferrer",className:`inline-flex items-center justify-between rounded-lg border px-3 py-2 text-sm font-medium transition ${t?"border-indigo-200 text-indigo-600 hover:bg-indigo-50":"cursor-not-allowed border-slate-200 text-slate-400"}`,"aria-disabled":!t},React.createElement("span",null,e),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2 h-4 w-4"},React.createElement("path",{d:"M9 7h8m0 0v8m0-8L7 17"}))),ResourceCard=({resource:e,onToggle:t,isExpanded:a})=>{const n=e.maintainingICs.length?e.maintainingICs:e.icCode?[e.icCode]:[];return React.createElement("div",{className:`rounded-2xl border p-5 shadow-sm transition ${a?"border-indigo-400 bg-white shadow-md":"border-slate-200 bg-white hover:shadow-md"}`},React.createElement("button",{type:"button",className:"flex w-full items-start justify-between gap-4 text-left",onClick:()=>t(e.id),"aria-expanded":a},React.createElement("div",{className:"space-y-2"},React.createElement("div",null,React.createElement("h3",{className:"text-lg font-semibold text-slate-900"},e.name),React.createElement("p",{className:"text-sm text-slate-500"},e.shortName||e.icName||n.join(", ")||"NIH Resource")),e.typicalUseCases&&React.createElement("p",{className:"text-sm text-slate-600"},e.typicalUseCases)),React.createElement("div",{className:"flex flex-col items-end gap-2"},React.createElement(MaintainerLogoRow,{ics:n,size:"small"}),React.createElement("span",{className:"text-xs font-medium text-indigo-600"},a?"Hide details":"View details"))),React.createElement("div",{className:"mt-4 flex flex-wrap gap-2"},e.resourceTypes.slice(0,3).map(o=>React.createElement("span",{key:o,className:"rounded-full bg-indigo-100 px-3 py-1 text-xs font-medium text-indigo-700"},o))),e.domains.length>0&&React.createElement("div",{className:"mt-3 text-xs text-slate-500"},e.domains.slice(0,3).join(" \xB7 "),e.domains.length>3?` +${e.domains.length-3} more`:""),a&&React.createElement("div",{className:"mt-6 space-y-6 border-t border-slate-200 pt-6 text-sm text-slate-700"},React.createElement(MaintainerLogoRow,{ics:n,size:"large"}),React.createElement("div",{className:"grid gap-4 sm:grid-cols-2"},React.createElement("div",null,React.createElement("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500"},"Domains"),React.createElement("p",{className:"mt-1"},e.domains.join(", ")||"Not specified")),React.createElement("div",null,React.createElement("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500"},"Status"),React.createElement("p",{className:"mt-1"},e.status||"Active"))),React.createElement("div",null,React.createElement("h4",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500"},"Access snapshot"),React.createElement("div",{className:"mt-3 grid gap-3 md:grid-cols-2"},React.createElement("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3"},React.createElement("p",{className:"text-xs font-semibold uppercase text-slate-500"},"Cost Status"),React.createElement("p",{className:"text-slate-900"},e.costStatus||"Not specified")),React.createElement("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3"},React.createElement("p",{className:"text-xs font-semibold uppercase text-slate-500"},"Access Model"),React.createElement("p",{className:"text-slate-900"},e.accessModel||"Not specified")),React.createElement("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3"},React.createElement("p",{className:"text-xs font-semibold uppercase text-slate-500"},"Data Sensitivity"),React.createElement("p",{className:"text-slate-900"},e.dataSensitivity||"Not specified")),React.createElement("div",{className:"rounded-xl border border-slate-100 bg-slate-50 p-3"},React.createElement("p",{className:"text-xs font-semibold uppercase text-slate-500"},"Requirements"),React.createElement("p",{className:"text-slate-900"},e.requiresRegistration?"Registration required":"No registration"," \xB7"," ",e.requiresDua?"DUA required":"No DUA")))),React.createElement("div",null,React.createElement("h4",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500"},"Practical usage"),React.createElement("dl",{className:"mt-3 space-y-2"},React.createElement("div",null,React.createElement("dt",{className:"text-slate-500"},"Typical use cases"),React.createElement("dd",{className:"text-slate-900"},e.typicalUseCases||"Not specified")),React.createElement("div",null,React.createElement("dt",{className:"text-slate-500"},"Skills required"),React.createElement("dd",{className:"text-slate-900"},e.skillsRequired.length?e.skillsRequired.join(", "):"Not specified")),React.createElement("div",null,React.createElement("dt",{className:"text-slate-500"},"Compute / access location"),React.createElement("dd",{className:"text-slate-900"},e.computeLocation.length?e.computeLocation.join(", "):"Not specified")),React.createElement("div",null,React.createElement("dt",{className:"text-slate-500"},"Parent / Integrations"),React.createElement("dd",{className:"text-slate-900"},e.integrationParents.length?e.integrationParents.join(", "):"None")))),React.createElement("div",null,React.createElement("h4",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500"},"Actionable links"),React.createElement("div",{className:"mt-3 flex flex-wrap gap-3"},React.createElement(ExternalLink,{label:"Primary URL",url:e.primaryUrl}),React.createElement(ExternalLink,{label:"Docs",url:e.docsUrl}),React.createElement(ExternalLink,{label:"API",url:e.apiUrl}))),e.keywords.length>0&&React.createElement("div",null,React.createElement("h4",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500"},"Keywords"),React.createElement("div",{className:"mt-3 flex flex-wrap gap-2 text-xs"},e.keywords.map(o=>React.createElement("span",{key:o,className:"rounded-full bg-slate-100 px-3 py-1 font-medium text-slate-600"},o)))),e.notes&&React.createElement("div",{className:"rounded-xl bg-amber-50 p-4 text-sm text-amber-800"},React.createElement("p",{className:"font-semibold"},"Notes"),React.createElement("p",null,e.notes))))},QuickLauncher=({isActive:e,onToggle:t,metricOptions:a,selectedMetricKey:n,onMetricSelect:o,yearOptions:d,selectedYear:u,onYearChange:h})=>React.createElement("div",{className:`quick-launch-shell ${e?"is-active":""}`},React.createElement("div",{className:"quick-launch-card"},React.createElement("div",{className:"quick-launch-card-header"},React.createElement("div",null,React.createElement("p",{className:"quick-launch-title"},"Quick Launch"),React.createElement("p",{className:"quick-launch-intro"},"Launch a focus view that locks onto a specific institute or center."))),e?React.createElement("div",{className:"quick-launch-controls"},React.createElement("div",{className:"quick-launch-tabs",role:"tablist"},a.map(p=>{const m=n===p.key;return React.createElement("button",{key:p.key,type:"button",role:"tab","aria-pressed":m,className:`quick-launch-tab ${m?"is-active":""}`,onClick:()=>o(p.key)},p.label)})),React.createElement("div",{className:"quick-launch-year"},React.createElement("label",{htmlFor:"quick-launch-year",className:"quick-launch-year-label"},"Fiscal year"),React.createElement("select",{id:"quick-launch-year",className:"quick-launch-year-select",value:u,onChange:p=>h(Number(p.target.value))},d.map(p=>React.createElement("option",{key:p,value:p},"FY ",p))))):React.createElement("div",{className:"quick-launch-prelaunch"},React.createElement("p",{className:"quick-launch-tagline"},"Jump right in to the NIH"),React.createElement("p",{className:"quick-launch-subtitle"},"See data, policies, funding opportunities, and rankings with one click.")),React.createElement("div",{className:"quick-launch-card-footer"},React.createElement("button",{type:"button",className:`quick-launch-button ${e?"is-active":""}`,onClick:t},e?"Close":"Launch")))),QuickLaunchDetail=({ic:e,selectedMetricKey:t,metricSummary:a,onClear:n})=>{if(!e)return null;const o=getIcAssets(e.code),d=t?getMetricValue(e,t,a==null?void 0:a.year):null,u=t?a==null?void 0:a.ranking.get(e.code):null,h=t&&(a!=null&&a.total)?d/a.total:null;return React.createElement("div",{className:"quick-launch-detail-card"},React.createElement("div",{className:"quick-launch-detail-header"},React.createElement("div",{className:"quick-launch-detail-logo"},o.large?React.createElement("img",{src:o.large,alt:`${e.name} logo`}):React.createElement("span",null,e.abbreviation)),React.createElement("div",null,React.createElement("p",{className:"quick-launch-detail-name"},e.name),React.createElement("p",{className:"quick-launch-detail-code"},e.code," \xB7 National Institutes of Health")),React.createElement("button",{type:"button",className:"detail-clear",onClick:n},"Clear")),t?React.createElement("div",{className:"quick-launch-metric-grid"},React.createElement("div",{className:"metric-card"},React.createElement("p",{className:"metric-label"},"Metric value"),React.createElement("p",{className:"metric-value"},formatMetricValue(t,d))),React.createElement("div",{className:"metric-card"},React.createElement("p",{className:"metric-label"},"Rank"),React.createElement("p",{className:"metric-value"},u?`#${u}`:"N/A")),React.createElement("div",{className:"metric-card"},React.createElement("p",{className:"metric-label"},"Share of total"),React.createElement("p",{className:"metric-value"},formatShare(h)))):React.createElement("div",{className:"quick-launch-links"},e.essentialLinks.map(p=>React.createElement("a",{key:p.label,href:p.url,target:"_blank",rel:"noreferrer"},React.createElement("span",null,p.label),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M9 7h8m0 0v8m0-8L7 17"}))))))},App=()=>{const[e,t]=useState(!0),[a,n]=useState([]),[o,d]=useState(""),[u,h]=useState(""),[p,m]=useState([]),[f,y]=useState([]),[r,g]=useState([]),[b,v]=useState([]),[C,j]=useState(!1),[S,B]=useState(!1),[L,E]=useState(2),[D,F]=useState(2),[K,H]=useState(null),[M,_]=useState(!1),[A,T]=useState(!1),[x,Q]=useState(null),[O,R]=useState(null),z=YEAR_OPTIONS[YEAR_OPTIONS.length-1],[w,U]=useState(z),q=useRef(null),$=useRef(null);useEffect(()=>{(async()=>{try{const c=await fetch("resources.json");if(!c.ok)throw new Error("Failed to load resources");const l=(await c.json()).map(normalizeResource);n(l),m(l.map(N=>N.id)),q.current=createSearchIndex(l)}catch(c){console.error(c),d("Unable to load the resource catalogue at this time.")}finally{t(!1)}})()},[]),useEffect(()=>{const s=c=>{$.current&&!$.current.contains(c.target)&&_(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),useEffect(()=>{const s=c=>{c.key==="Escape"&&_(!1)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[]),useEffect(()=>{if(!u){m(a.map(s=>s.id));return}if(q.current){const s=q.current.search(u,100);m(Array.isArray(s)?s:[])}else{const s=u.toLowerCase(),c=a.filter(i=>[i.name,i.shortName,i.icCode,i.icName,i.domains.join(" "),i.resourceTypes.join(" "),i.typicalUseCases,i.keywords.join(" ")].filter(Boolean).some(l=>l.toLowerCase().includes(s))).map(i=>i.id);m(c)}},[u,a]);const k=useMemo(()=>({ics:uniqueSorted(a.flatMap(s=>s.maintainingICs.length?s.maintainingICs:s.icCode?[s.icCode]:[])),domains:uniqueSorted(a.flatMap(s=>s.domains)),resourceTypes:uniqueSorted(a.flatMap(s=>s.resourceTypes))}),[a]),I=useMemo(()=>{const s=new Map(a.map(l=>[l.id,l]));let i=[...u?p.map(l=>s.get(l)).filter(Boolean):a];return u&&i.length===0?[]:(f.length&&(i=i.filter(l=>(l.maintainingICs.length?l.maintainingICs:l.icCode?[l.icCode]:[]).some(ne=>f.includes(ne)))),r.length&&(i=i.filter(l=>l.domains.some(N=>r.includes(N)))),b.length&&(i=i.filter(l=>l.resourceTypes.some(N=>b.includes(N)))),C&&(i=i.filter(l=>l.hasApi)),S&&(i=i.filter(l=>l.isWebBased)),i=i.filter(l=>l.accessRestrictiveness<=L),i=i.filter(l=>l.sensitivityRestrictiveness<=D),i)},[a,u,p,f,r,b,C,S,L,D]);useEffect(()=>{if(!I.length){H(null);return}H(s=>s&&I.some(c=>c.id===s)?s:I[0].id)},[I]);const P=(s,c,i)=>{i(l=>l.includes(s)?l.filter(N=>N!==s):[...l,s])},J=()=>{V(),g([]),v([]),j(!1),B(!1),E(2),F(2)},X=useMemo(()=>{if(!x)return null;const s=QUICK_LAUNCH_STATS.map(l=>({code:l.code,value:getMetricValue(l,x,w)})),c=s.reduce((l,N)=>l+N.value,0),i=new Map([...s].sort((l,N)=>N.value-l.value).map((l,N)=>[l.code,N+1]));return{total:c,ranking:i,year:w}},[x,w]),G=useMemo(()=>QUICK_LAUNCH_STATS.find(s=>s.code===O)||null,[O]),Z=useMemo(()=>Object.keys(LOGO_LIBRARY),[]),Y=s=>{Q(c=>c===s?null:s)},ee=s=>{y(c=>{const i=c.includes(s),l=i?c.filter(N=>N!==s):[...c,s];return i?R(N=>N===s?null:N):(R(s),T(!0)),l})},V=()=>{y([]),R(null),T(!1)},te=s=>{H(c=>c===s?null:s)},se=()=>R(null);if(e)return React.createElement("div",{className:"flex min-h-screen items-center justify-center text-slate-500"},"Loading resources...");if(o)return React.createElement("div",{className:"flex min-h-screen flex-col items-center justify-center space-y-3 text-center"},React.createElement("p",{className:"text-lg font-semibold text-slate-800"},o),React.createElement("p",{className:"text-sm text-slate-500"},"Check the JSON file and reload the page."));const W=I.length,ae=!A;return React.createElement("div",{className:"page-shell"},React.createElement("div",{className:`quick-launch-float ${A?"is-active":""}`},React.createElement(QuickLauncher,{isActive:A,onToggle:()=>T(s=>!s),metricOptions:METRIC_OPTIONS,selectedMetricKey:x,onMetricSelect:Y,yearOptions:YEAR_OPTIONS,selectedYear:w,onYearChange:U})),React.createElement("header",{className:`hero ${A?"is-launching":""}`},React.createElement("div",{className:"hero-content"},React.createElement("div",{className:`hero-nav ${M?"is-open":""}`,ref:$},React.createElement("button",{type:"button",className:"hero-nav-toggle","aria-expanded":M,"aria-controls":"hero-nav-menu",onClick:()=>_(s=>!s)},React.createElement("span",{"aria-hidden":"true"},"NIH Resource Finder"),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",className:"hero-nav-toggle-icon"},React.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 0 1 1.06.02L10 11.185l3.71-3.955a.75.75 0 1 1 1.08 1.04l-4.24 4.52a.75.75 0 0 1-1.08 0l-4.24-4.52a.75.75 0 0 1 .02-1.06z",clipRule:"evenodd"})),React.createElement("span",{className:"sr-only"},"Toggle hero navigation menu")),React.createElement("div",{id:"hero-nav-menu",className:"hero-nav-menu",hidden:!M},NAV_LINKS.map((s,c)=>React.createElement("a",{key:s.href,href:s.href,className:`hero-nav-link ${c===0?"is-current":""}`,onClick:()=>_(!1)},React.createElement("span",null,s.label),React.createElement("span",{"aria-hidden":"true",className:"hero-nav-link-indicator"},"\u2197"))))),ae&&React.createElement(React.Fragment,null,React.createElement("h1",null,"Search, filter, and launch NIH-supported research infrastructure"),React.createElement("p",{className:"hero-subtitle"},"Explore data repositories, biospecimen banks, and analysis tools across NIH institutes. Use the curated filters, NIH logo picker, and fast semantic search to hone in on the resources that accelerate your work."),React.createElement("div",{className:"hero-stat-grid"},React.createElement("div",{className:"hero-stat"},React.createElement("p",{className:"hero-stat-value"},a.length),React.createElement("p",{className:"hero-stat-label"},"Total resources")),React.createElement("div",{className:"hero-stat"},React.createElement("p",{className:"hero-stat-value"},TOTAL_INSTITUTES),React.createElement("p",{className:"hero-stat-label"},"Institutes")),React.createElement("div",{className:"hero-stat"},React.createElement("p",{className:"hero-stat-value"},k.resourceTypes.length),React.createElement("p",{className:"hero-stat-label"},"Resource types")))))),G&&React.createElement("section",{className:"quick-launch-detail"},React.createElement(QuickLaunchDetail,{ic:G,selectedMetricKey:x,metricSummary:X,onClear:se})),React.createElement("section",{className:"ic-ribbon-section"},React.createElement("div",{className:"ic-ribbon-shell"},React.createElement("div",{className:"ic-ribbon-headline"},React.createElement("p",{className:"ic-ribbon-eyebrow"},"Institutes & Centers"),React.createElement("div",{className:"ic-ribbon-controls"},React.createElement("div",{className:"ic-ribbon-select"},React.createElement("label",{className:"sr-only",htmlFor:"hero-metric-select"},"Hero metric"),React.createElement("select",{id:"hero-metric-select",value:x||"",onChange:s=>Y(s.target.value)},React.createElement("option",{value:""},"Essential links"),METRIC_OPTIONS.map(s=>React.createElement("option",{key:s.key,value:s.key},s.label)))),React.createElement("div",{className:"ic-ribbon-select"},React.createElement("label",{className:"sr-only",htmlFor:"hero-year-select"},"Fiscal year"),React.createElement("select",{id:"hero-year-select",value:w,onChange:s=>U(Number(s.target.value))},YEAR_OPTIONS.map(s=>React.createElement("option",{key:s,value:s},"FY ",s)))),React.createElement("button",{type:"button",className:"ic-ribbon-clear",onClick:V,disabled:!f.length},"Clear selection"))),React.createElement(LogoFilterGrid,{options:Z,selected:f,onToggle:ee}),React.createElement("p",{className:"ic-ribbon-title"},"Pick a badge to filter resources and launch detail cards"))),React.createElement("main",null,React.createElement("section",{id:"resources",className:"resources-panel text-slate-900"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 lg:px-8"},React.createElement("div",{className:"resource-layout"},React.createElement("aside",{id:"filters",className:"filters-column"},React.createElement("div",{className:"filters-column-inner"},React.createElement("div",{className:"filter-search-card"},React.createElement("label",{className:"sr-only",htmlFor:"resource-search"},"Search resources"),React.createElement("div",{className:"relative"},React.createElement("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400"},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M10.5 3.75a6.75 6.75 0 1 1 0 13.5 6.75 6.75 0 0 1 0-13.5zm0 0L16.5 15"}))),React.createElement("input",{id:"resource-search",type:"search",placeholder:"Search by resource name, domain, or keyword",value:u,onChange:s=>h(s.target.value),className:"w-full rounded-2xl border border-slate-200 bg-slate-50 py-3 pl-10 pr-4 text-sm text-slate-700 focus:border-indigo-400 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-100"})),React.createElement("p",{className:"filter-search-meta"},React.createElement("span",null,W)," resources in view")),React.createElement("div",{className:"filters-panel rounded-3xl border border-slate-200 bg-white p-6 shadow-xl"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500"},"Filters"),React.createElement("button",{className:"text-xs font-semibold uppercase tracking-wide text-indigo-600 hover:text-indigo-500",onClick:J},"Clear all")),React.createElement("div",{className:"mt-5 space-y-6"},React.createElement(MultiEntryInput,{label:"Resource type",placeholder:"Add a resource type",options:k.resourceTypes,values:b,onChange:v}),React.createElement(OptionBrowser,{label:"resource types",options:k.resourceTypes,selected:b,onToggle:s=>P(s,b,v)}),React.createElement(MultiEntryInput,{label:"Domain",placeholder:"Add a domain",options:k.domains,values:r,onChange:g}),React.createElement(OptionBrowser,{label:"domains",options:k.domains,selected:r,onToggle:s=>P(s,r,g)}),React.createElement("div",{className:"space-y-4 rounded-2xl border border-slate-200 bg-slate-50 p-4"},React.createElement("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500"},"Access emphasis"),React.createElement(ToggleControl,{label:"Has public API",description:"Only show resources advertising an API endpoint.",checked:C,onChange:j}),React.createElement(ToggleControl,{label:"Web-based experience",description:"Limit to resources that are primarily web hosted.",checked:S,onChange:B}),React.createElement(RestrictivenessSlider,{label:"Access model threshold",value:L,onChange:E}),React.createElement(RestrictivenessSlider,{label:"Data sensitivity threshold",value:D,onChange:F})))))),React.createElement("div",{className:"resource-results"},W===0?React.createElement("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white p-10 text-center text-slate-500"},React.createElement("p",{className:"text-lg font-semibold text-slate-700"},"No resources found"),React.createElement("p",{className:"mt-2 text-sm text-slate-500"},"Adjust your filters or search query to discover more NIH resources.")):React.createElement("div",{className:"space-y-4"},I.map(s=>React.createElement(ResourceCard,{key:s.id,resource:s,isExpanded:K===s.id,onToggle:te}))))))),React.createElement("section",{id:"support",className:"support-section text-white"},React.createElement("div",{className:"mx-auto max-w-5xl px-4 text-center lg:px-8"},React.createElement("div",{className:"rounded-3xl border border-white border-opacity-10 bg-white bg-opacity-5 p-10 shadow-2xl backdrop-blur"},React.createElement("p",{className:"text-xs font-semibold uppercase tracking-[0.5em] text-sky-200"},"Need help?"),React.createElement("h2",{className:"mt-4 text-3xl font-semibold"},"Support for the NIH Resource Finder"),React.createElement("p",{className:"mt-4 text-base text-white text-opacity-80"},"Contact the BioData Catalyst Resource Finder team to contribute new resources, provide corrections, or request additional filters. Use your existing NIH support channels or email the program office for guidance."),React.createElement("div",{className:"mt-8 flex flex-wrap justify-center gap-4 text-sm font-semibold"},React.createElement("a",{href:"mailto:nih-resourcefinder@nih.gov",className:"rounded-full border border-white border-opacity-40 px-6 py-3 text-white transition hover:border-white"},"Email program office"),React.createElement("a",{href:"#resources",className:"rounded-full bg-white px-6 py-3 text-slate-900 shadow-lg transition hover:-translate-y-0.5"},"Back to top")))))))};ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App,null));
